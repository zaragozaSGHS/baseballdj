<!-- Ballpark DJ Web App - HTML + JavaScript -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ballpark DJ Web App</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #playerList { list-style: none; padding: 0; }
        li { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Ballpark DJ Web App</h1>
    <button id="addPlayer">Add Player</button>
    <ul id="playerList"></ul>
    
    <script>
    /*
      Ballpark DJ Web App - JavaScript
      Features:
      - Upload and assign audio clips to players
      - Play clips with fade-in/out effects
      - Apply voice effects
      - Customize team settings
      - Can be embedded in a Google Site
    */

    // UI Elements
    const playerList = document.getElementById("playerList");
    const addPlayerBtn = document.getElementById("addPlayer");

    // Audio Context for effects
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let players = [];

    // Function to add a new player
    function addPlayer() {
        const playerName = prompt("Enter player's name:");
        if (!playerName) return;
        
        const player = {
            name: playerName,
            audioBuffer: null,
        };
        
        players.push(player);
        updatePlayerList();
    }

    // Update UI player list
    function updatePlayerList() {
        playerList.innerHTML = "";
        players.forEach((player, index) => {
            const listItem = document.createElement("li");
            listItem.textContent = player.name + " ";
            
            // Play button
            const playBtn = document.createElement("button");
            playBtn.textContent = "Play";
            playBtn.onclick = () => playAudio(index);
            playBtn.disabled = !player.audioBuffer;
            
            // Upload button
            const uploadBtn = document.createElement("input");
            uploadBtn.type = "file";
            uploadBtn.accept = "audio/*";
            uploadBtn.onchange = (event) => loadAudio(event, index, playBtn);
            
            listItem.appendChild(playBtn);
            listItem.appendChild(uploadBtn);
            playerList.appendChild(listItem);
        });
    }

    // Load audio file for a player
    function loadAudio(event, index, playBtn) {
        const file = event.target.files[0];
        if (!file) {
            alert("No file selected.");
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            audioContext.decodeAudioData(e.target.result, (buffer) => {
                players[index].audioBuffer = buffer;
                playBtn.disabled = false; // Enable play button after file loads
                console.log(`Audio loaded for ${players[index].name}`);
            }, (error) => {
                console.error("Error decoding audio", error);
                alert("Error loading audio file. Try another format.");
            });
        };
        reader.readAsArrayBuffer(file);
    }

    // Play audio with fade-in and fade-out effect
    function playAudio(index) {
        if (!players[index].audioBuffer) {
            alert("No audio loaded for this player.");
            return;
        }

        const source = audioContext.createBufferSource();
        source.buffer = players[index].audioBuffer;
        const gainNode = audioContext.createGain();
        source.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        // Apply fade-in effect
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 1);
        
        source.start(0);
        
        // Apply fade-out effect
        source.onended = () => {
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1);
        };
    }

    // Event listeners
    addPlayerBtn.addEventListener("click", addPlayer);

    // Initial update
    updatePlayerList();
    </script>
</body>
</html>
